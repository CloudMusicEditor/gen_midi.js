OME.midi={};(function(){OME.midi.consts={TRACK_MODES:{SINGLE:0,MULTI_SYNC:1,MULTI_ASYNC:2},EVENT_TYPES:{NOTE_OFF:8,NOTE_ON:9,NOTE_AFTERTOUCH:10,CONTROLLER:11,PROGRAM_CHANGE:12,CHANNEL_AFTERTOUCH:13,PITCH_BEND:14,SYSEX:240,SYSEX_FINAL:247,META_EVENT:255}}})();(function(){OME.midi.events={}})();(function(){OME.midi.gen={};OME.midi.gen.genMIDI=function(c){var a="MThd\x00\x00\x00\u0006",b=OME.midi.consts.TRACK_MODES;switch(c.track_mode){case b.SINGLE:a+="\x00\x00";break;case b.MULTI_SYNC:a+="\x00\u0001";break;case b.MULTI_ASYNC:a+="\x00\u0002"}for(var a=a+OME.midi.util.packInteger(c.tracks.length,2,2),a=a+OME.midi.util.packInteger(c.deltaTicks,2,2),b="",d=0,e=c.tracks.length;d<e;d++){for(var f=c.tracks[d],b=b+"MTrk",g=0,f=f.events.length;g<f;g++);b+=OME.midi.util.packInteger(0,4,4);b+=""}return a}})();
$(function(){console.log(escape(OME.midi.gen.genMIDI({track_mode:OME.midi.consts.TRACK_MODES.SINGLE,tracks:[],deltaTicks:8})))});(function(){OME.midi.struct={};OME.midi.struct.Track=Class.extend({init:function(){},events:[],_stateCache:[],describeStateAtTime:function(c,a){}});OME.midi.struct.Event=Class.extend({command:null,channel:null,data:null});OME.midi.struct.State={}})();(function(){OME.midi.util={packInteger:function(c,a,b){"undefined"===typeof a&&(a=1);for(var d="",e=0;0!==(c&-1);)d=String.fromCharCode(c&255)+d,c>>>=8,e+=1;if(e<a)for(;0<a-e;)d="\x00"+d,e+=1;if("undefined"!==typeof b&&e>b)throw{type:"overflow"};return d}}})();
